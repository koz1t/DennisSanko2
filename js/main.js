const body=document.querySelector("body"),pageControl=e=>{body&&(e?body.classList.add("body--lock"):body.classList.remove("body--lock"))},header=document.querySelector(".header"),burgerBtn=document.querySelector(".burger-btn");if(header&&burgerBtn){const e=e=>{e?(header.classList.add("header--burger-active"),pageControl(!0)):(pageControl(!1),header.classList.remove("header--burger-active"))},t=e=>{e.target.closest(".header")||e.target.closest(".burger-btn")||burgerBtn.click()},r=r=>{e(r),r?document.addEventListener("click",t):document.removeEventListener("click",t)};r(burgerBtn.classList.contains("burger-btn--active")),burgerBtn.addEventListener("click",(()=>{r(burgerBtn.classList.toggle("burger-btn--active"))}))}const initSubmenu=e=>{e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),e.parentElement.classList.toggle("active")}))}))};initSubmenu(document.querySelectorAll(".nav__item-has-child > a")),initSubmenu(document.querySelectorAll(".nav__submenu-item-has-child > a"));const cards=document.querySelectorAll(".cards");cards.forEach((e=>{const t=e.querySelectorAll(".cards__item"),r=e.querySelectorAll(".cards__pagination-item");let c=0;function o(){t.forEach((e=>e.classList.remove("--active"))),r.forEach((e=>e.classList.remove("--active"))),t[c].classList.add("--active"),r[c].classList.add("--active"),s()}function s(){if(0===c)e.querySelector(".cards__list").style.transform="translateX(0)";else{const r=t[c].offsetWidth,o=e.offsetWidth,s=t[c].offsetLeft-o/2+r/2;e.querySelector(".cards__list").style.transform=`translateX(-${s}px)`}}o(),s(),r.forEach(((e,t)=>{e.addEventListener("click",(()=>{c=t,o()}))}));let n=0,a=0;e.addEventListener("touchstart",(e=>{n=e.touches[0].clientX})),e.addEventListener("touchmove",(e=>{a=e.touches[0].clientX})),e.addEventListener("touchend",(()=>{n>a+50?c=(c+1)%t.length:n<a-50&&(c=(c-1+t.length)%t.length),o()})),window.addEventListener("resize",s)}));const tabs=document.querySelectorAll(".tabs");tabs.forEach((e=>{const t=e.querySelectorAll(".tabs__btn"),r=e.querySelectorAll(".tabs__content"),c=e.querySelector(".tabs__content-carousel"),o=e.querySelector(".tabs__btns"),s=e.querySelectorAll(".tabs__pagination-item");let n=0;if(t.length>0&&c&&t.length==r.length){const e=e=>{t[n].classList.remove("--active"),r[n].classList.remove("--active"),s[n].classList.remove("--active"),n=e,c.style.transform=`translateX(-${100*n}%)`,c.style.height=`${r[n].offsetHeight}px`,t[n].classList.add("--active"),r[n].classList.add("--active"),s[n].classList.add("--active"),a()},a=()=>{const e=t[n],r=o.offsetWidth,c=e.offsetLeft-r/2+e.offsetWidth/2;o.scrollTo({left:c,behavior:"smooth"})};for(let e=0;e<t.length;e++)t[e].classList.remove("--active"),r[e].classList.remove("--active"),s[e].classList.remove("--active");e(n),t.forEach(((t,r)=>{t.addEventListener("click",(()=>{e(r)}))})),s.forEach(((t,r)=>{t.addEventListener("click",(()=>{e(r)}))}));let l=0,i=0;c.addEventListener("touchstart",(e=>{l=e.touches[0].clientX})),c.addEventListener("touchmove",(e=>{i=e.touches[0].clientX})),c.addEventListener("touchend",(()=>{const r=l-i;r>50&&n<t.length-1?e(n+1):r<-50&&n>0&&e(n-1)}))}}));const forms=document.querySelectorAll(".feedback-form__form");forms.forEach((e=>{const t=e.querySelectorAll(".feedback-form__input.--req input"),r=e.querySelector('input[name="phone"]'),c=e.querySelector(".custom-select"),o=c.querySelector(".custom-select__current"),s=c.querySelectorAll(".custom-select__option"),n=e.querySelector(".feedback-form__mark"),a=n.getAttribute("data-default"),l=e.querySelector('input[name="country-code"]'),i=e.querySelector('.feedback-form__submit[type="submit"]'),d=e.querySelector('.feedback-form__submit:not([type="submit"])'),u=e=>{const t=e.closest(".feedback-form__input");e.value.trim()?(t.classList.remove("--error"),f()):(t.classList.add("--error"),n.classList.add("--error"),n.textContent="Ошибка! Проверьте правильность заполнения данных")},m=()=>{const e=r.closest(".feedback-form__input"),t=r.placeholder,c=r.value;t.split("").every(((e,t)=>"_"===e?/\d/.test(c[t]):e===c[t]))?(e.classList.remove("--error"),f()):(e.classList.add("--error"),n.classList.add("--error"),n.textContent="Ошибка! Проверьте правильность заполнения данных")},f=()=>{e.querySelectorAll(".feedback-form__input.--error").length>0||(n.classList.remove("--error"),n.textContent=a)};t.forEach((e=>{e.addEventListener("blur",(()=>u(e))),e.addEventListener("input",(()=>u(e)))})),r.addEventListener("blur",m),r.addEventListener("input",m),d.addEventListener("click",(e=>{let c=!0;t.forEach((e=>{u(e),e.value.trim()||(c=!1)})),m(),r.closest(".feedback-form__input").classList.contains("--error")&&(c=!1),c?i.click():e.preventDefault()}));const h=()=>{const e=c.querySelector(".custom-select__option.--current"),t=e.getAttribute("data-mask");r.placeholder=t,r.value="",r.removeEventListener("input",g),r.addEventListener("input",g),l.value=e.textContent},g=e=>{let t=e.target.value.replace(/\D/g,"");let c=r.placeholder;e.target.selectionStart;for(let e=0;e<t.length;e++)c=c.replace("_",t[e]);e.target.value=c;let o=c.indexOf("_");-1===o&&(o=c.length),e.target.setSelectionRange(o,o)};c.addEventListener("click",(()=>{c.classList.toggle("--active")})),s.forEach((e=>{e.addEventListener("click",(function(){o.textContent=this.textContent,s.forEach((e=>e.classList.remove("--current"))),this.classList.add("--current"),h()}))})),document.addEventListener("click",(e=>{c.contains(e.target)||c.classList.remove("--active")})),h();e.querySelectorAll(".feedback-form__input").forEach((e=>{e.addEventListener("click",(()=>{const t=e.querySelector("input");t&&t.focus()}))}))}));const elements=document.querySelectorAll("[data-typing]");elements.forEach((e=>{const t=e.getAttribute("data-typing");e.style.height=`${e.offsetHeight}px`;let r=0;e.innerHTML="",function c(){r<t.length&&(e.innerHTML+=t.charAt(r),r++,setTimeout(c,60))}()})),document.querySelectorAll("[data-glowing]").forEach((e=>{const t=parseInt(e.getAttribute("data-glowing"),10),r=Array.from(e.querySelectorAll("*")).filter((e=>Array.from(e.classList).some((e=>e.endsWith("__item")))));let c=0;if(r.length>0){const e=()=>{r.forEach((e=>e.classList.remove("--glowing"))),r[c].classList.add("--glowing"),c=(c+1)%r.length};e(),setInterval(e,t)}}));const popupInit=(e,t)=>{if(e){document.querySelectorAll(t).forEach((t=>{t.addEventListener("click",(()=>{e.classList.add("popup--active")}))})),e.addEventListener("click",(t=>{t.target.closest(".popup__content")&&!t.target.closest(".popup__close")||e.classList.remove("popup--active")}))}},feedbackPopup=document.querySelector("#feedback-popup");popupInit(feedbackPopup,"[data-popup-feedback]");const createScrollingBackground=(e,t="left",r)=>{const c=document.querySelector(e),o=c.querySelectorAll("img"),s=document.createElement("canvas"),n=s.getContext("2d"),a=100;let l=0,i=0;const d=()=>{s.width=l,s.height=a;let e=0;o.forEach((t=>{const r=t.width/t.height,c=a*r;n.drawImage(t,e,0,c,a),e+=c+50}));const i=s.toDataURL("image/png");c.style.backgroundImage=`url(${i})`;const d=c.clientHeight,u=s.width/s.height*d,m=document.styleSheets[0];let f=`scrollBackground-${r}`;if(!Array.from(m.cssRules).some((e=>e.name===f))){let e="left"===t?`\n  @keyframes ${f} {\n  from { background-position: 0 0; }\n  to { background-position: -${u}px 0; }\n  }\n  `:`\n  @keyframes ${f} {\n  from { background-position: -${u}px 0; }\n  to { background-position: 0 0; }\n  }\n  `;m.insertRule(e,m.cssRules.length)}c.style.animation=`${f} 30s linear infinite`};o.forEach((e=>{e.onload=()=>{const t=e.width/e.height;l+=a*t+50,i++,i===o.length&&d()},e.complete&&e.onload()}))};document.addEventListener("DOMContentLoaded",(()=>{createScrollingBackground("#partners-list-1","left",1),createScrollingBackground("#partners-list-2","right",2)}));